!function(e){var t={};function a(r){if(t[r])return t[r].exports;var n=t[r]={i:r,l:!1,exports:{}};return e[r].call(n.exports,n,n.exports,a),n.l=!0,n.exports}a.m=e,a.c=t,a.d=function(e,t,r){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},a.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(a.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)a.d(r,n,function(t){return e[t]}.bind(null,n));return r},a.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="",a(a.s=8)}([function(e,t){!function(){e.exports=this.wp.element}()},function(e,t){!function(){e.exports=this.wp.i18n}()},function(e,t){!function(){e.exports=this.wp.blockEditor}()},function(e,t){!function(){e.exports=this.React}()},function(e,t){!function(){e.exports=this.wp.components}()},function(e,t){e.exports=function(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}},function(e,t){!function(){e.exports=this.wp.blocks}()},function(e,t){!function(){e.exports=this.wp.icons}()},function(e,t,a){"use strict";a.r(t);var r=a(5),n=a.n(r),c=a(0),l=a(1),i=a(6),o=a(2),u=a(4),d=a(3),s=a.n(d);function m(){return(m=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e}).apply(this,arguments)}var p=s.a.createElement("path",{d:"M42.9 38.3V38c2.9-.6 4.3-2.2 4.3-4.8V21.6c0-5.4-2.7-8.2-8-8.2H23.3c-.2-.6-.7-1-1.4-1-.8 0-1.4.6-1.4 1.4s.6 1.4 1.4 1.4c.7 0 1.2-.4 1.4-1H29v22.1h-5.7c-.2-.6-.7-1-1.4-1-.8 0-1.4.6-1.4 1.4s.6 1.4 1.4 1.4c.7 0 1.2-.4 1.4-1H29v20.7h-5.6c-.2-.6-.7-1-1.4-1-.8 0-1.4.6-1.4 1.4 0 .8.6 1.4 1.4 1.4.7 0 1.2-.4 1.4-1H41c4.6 0 6.8-2.2 6.8-6.7v-8.4c.1-2.6-1.6-4.3-4.9-5.2zm-8-19.4h3.6c1.8 0 2.7 1.1 2.7 3.3v9.9c0 2.2-1.2 3.3-3.4 3.3H35V18.9zm6.9 32.2c0 1.3-.8 1.9-2.4 1.9h-4.5V40.8h3.3c2.4 0 3.6 1.1 3.6 3.2v7.1z"}),b=a(7);Object(i.registerBlockType)("clashplayer/media",{title:Object(l.__)("ClashPlayer","clashplayer"),icon:{src:function(e){return s.a.createElement("svg",m({viewBox:"0 0 72 72"},e),p)}},category:"clashplayer",attributes:{src:{type:"string",source:"attribute",selector:"source",attribute:"src"},mediaUrl:{type:"string",source:"attribute",selector:"source",attribute:"src"},caption:{type:"string",source:"html",selector:"figcaption"},id:{type:"number"},autoplay:{type:"boolean",source:"attribute",selector:"audio",attribute:"autoplay"},loop:{type:"boolean",source:"attribute",selector:"audio",attribute:"loop"},preload:{type:"string",source:"attribute",selector:"audio",attribute:"preload"}},supports:{align:["wide","full"]},edit:function(e){console.log(e);var t=e.attributes,a=t.id,r=t.autoplay,i=t.loop,s=t.preload,m=t.src,p=e.setAttributes,f=e.className,y=e.noticeOperations,E=e.noticeUI,v=["audio"];function O(e){return function(t){p(n()({},e,t))}}function j(e){y.removeAllNotices(),y.createErrorNotice(e)}function g(e){e&&e.url?p({src:e.url,id:e.id}):p({src:void 0,id:void 0})}return Object(d.useEffect)((function(){var e=document.getElementById("audio_controls");document.createElement("audio").canPlayType||(e.style.display="none");var t=document.querySelector("audio");document.getElementById("play_toggle").addEventListener("click",(function(){t.currentTime>0&&!t.paused&&!t.ended&&t.readyState>2?(t.pause(),this.innerHTML='<i class="fa fa-play" aria-hidden="true" title="Play"></i>'):(t.play(),t.preload="metadata",this.innerHTML='<i class="fa fa-pause" aria-hidden="true" title="Pause"></i>')})),document.getElementById("rewind").addEventListener("click",(function(){this.innerHTML='<i class="fa fa-backward" aria-hidden="true" title="Backward"></i>',t.currentTime-=10})),document.getElementById("forward").addEventListener("click",(function(){this.innerHTML='<i class="fa fa-forward" aria-hidden="true" title="Forward"></i>',t.currentTime+=10}));var a=document.getElementById("play_progress");t.addEventListener("timeupdate",(function(){var e=this.currentTime/this.duration*100;a.style.width=e+"%"}));var r=document.getElementById("load_progress");function n(){if(t.buffered.length>0){var e=t.buffered.end(0)/t.duration*100;r.style.width=e+"%"}}t.addEventListener("progress",(function(){n()})),t.addEventListener("loadeddata",(function(){n()})),t.addEventListener("canplaythrough",(function(){n()})),t.addEventListener("playing",(function(){n()}));var c=document.getElementById("duration_time"),l=document.getElementById("current_time");function i(e){e=Math.round(e);var t=Math.floor(e/60);return(t=t>=10?t:"0"+t)+":"+(e=(e=Math.floor(e%60))>=10?e:"0"+e)}t.addEventListener("timeupdate",(function(){l.innerHTML=i(this.currentTime)})),t.addEventListener("durationchange",(function(){c.innerHTML=i(this.duration)})),document.getElementById("volume").addEventListener("change",(function(e){t.volume=e.target.value}));var o=document.getElementById("seek"),u=document.getElementById("playback");t.addEventListener("durationchange",(function(e){e.target.duration&&(o.max=e.target.duration)})),t.addEventListener("durationchange",(function(e){e.target.duration&&(u.max=e.target.duration)})),o.addEventListener("change",(function(e){t.currentTime=e.target.value,u.value=e.target.value}))}),[]),m?Object(c.createElement)("div",{className:"".concat(f," clashplayer-block clashplayer-editable")},Object(c.createElement)(o.BlockControls,null,Object(c.createElement)(o.MediaReplaceFlow,{mediaId:a,mediaURL:m,allowedTypes:v,accept:"audio/*",onSelect:g,onError:j})),Object(c.createElement)(o.InspectorControls,null,Object(c.createElement)(u.PanelBody,{title:Object(l.__)("Audio settings")},Object(c.createElement)(u.ToggleControl,{label:Object(l.__)("Autoplay"),onChange:O("autoplay"),checked:r,help:function(e){return e?Object(l.__)("Note: Autoplaying audio may cause usability issues for some visitors."):null}}),Object(c.createElement)(u.ToggleControl,{label:Object(l.__)("Loop"),onChange:O("loop"),checked:i}),Object(c.createElement)(u.SelectControl,{label:Object(l.__)("Preload"),value:s||"",onChange:function(e){return p({preload:e||void 0})},options:[{value:"",label:Object(l.__)("Browser default")},{value:"auto",label:Object(l.__)("Auto")},{value:"metadata",label:Object(l.__)("Metadata")},{value:"none",label:Object(l.__)("None")}]}))),Object(c.createElement)("audio",{id:"result_player"},Object(c.createElement)("source",{src:m,preload:"metadata",type:"audio/mpeg"}),Object(c.createElement)("source",{src:m,preload:"metadata",type:"audio/ogg"}),Object(c.createElement)("source",{src:m,preload:"metadata",type:"audio/mp4"}),Object(c.createElement)("p",null)),Object(c.createElement)("div",{id:"audio_controls"},Object(c.createElement)("div",{id:"btns_box"},Object(c.createElement)("button",{id:"play_toggle",className:"player-button"},Object(c.createElement)("i",{className:"fa fa-play","aria-hidden":"true",title:"Play"})),Object(c.createElement)("button",{id:"rewind",className:"player-button"},Object(c.createElement)("i",{className:"fa fa-backward","aria-hidden":"true",title:"Backward"})),Object(c.createElement)("button",{id:"forward",className:"player-button"},Object(c.createElement)("i",{className:"fa fa-forward","aria-hidden":"true",title:"Forward"}))),Object(c.createElement)("div",{id:"progress"},Object(c.createElement)("progress",{value:"0",id:"playback"}),Object(c.createElement)("span",{id:"load_progress"}),Object(c.createElement)("span",{id:"play_progress"})),Object(c.createElement)("div",{id:"time"},Object(c.createElement)("span",null,"current time"),Object(c.createElement)("span",{id:"current_time"},"00:00"),Object(c.createElement)("span",null,"duration"),Object(c.createElement)("span",{id:"duration_time"},"00:00")),Object(c.createElement)("div",{id:"video_volume"},Object(c.createElement)("label",{id:"volume_bar",htmlFor:"volume"}),Object(c.createElement)("input",{type:"range",id:"volume",title:"volume",min:"0",max:"1",step:"0.1",value:"1"})),Object(c.createElement)("div",{id:"video_seek"},Object(c.createElement)("label",{htmlFor:"seek"}),Object(c.createElement)("input",{type:"range",id:"seek",title:"seek",min:"0",value:"0",max:"0"})))):Object(c.createElement)(o.MediaPlaceholder,{icon:Object(c.createElement)(o.BlockIcon,{icon:b.audio}),labels:{title:Object(l.__)("Media area")},className:"block-image",onSelect:g,accept:"audio/*",allowedTypes:v,value:attributes,notices:E,onError:j})},save:function(e){var t=e.attributes,a=(t.id,t.autoplay,t.caption,t.loop,t.preload,t.src),r=e.className;return Object(c.createElement)("div",{className:"".concat(r," clashplayer-block clashplayer-static")},Object(c.createElement)("audio",{id:"result_player"},Object(c.createElement)("source",{src:a,preload:"metadata",type:"audio/mpeg"}),Object(c.createElement)("source",{src:a,preload:"metadata",type:"audio/ogg"}),Object(c.createElement)("source",{src:a,preload:"metadata",type:"audio/mp4"}),Object(c.createElement)("p",null)),Object(c.createElement)("div",{id:"audio_controls"},Object(c.createElement)("div",{id:"btns_box"},Object(c.createElement)("button",{id:"play_toggle",className:"player-button"},Object(c.createElement)("i",{className:"fa fa-play","aria-hidden":"true",title:"Play"})),Object(c.createElement)("button",{id:"rewind",className:"player-button"},Object(c.createElement)("i",{className:"fa fa-backward","aria-hidden":"true",title:"Backward"})),Object(c.createElement)("button",{id:"forward",className:"player-button"},Object(c.createElement)("i",{className:"fa fa-forward","aria-hidden":"true",title:"Forward"}))),Object(c.createElement)("div",{id:"progress"},Object(c.createElement)("progress",{value:"0",id:"playback"}),Object(c.createElement)("span",{id:"load_progress"}),Object(c.createElement)("span",{id:"play_progress"})),Object(c.createElement)("div",{id:"time"},Object(c.createElement)("span",null,"Current Time"),Object(c.createElement)("span",{id:"current_time"},"00:00"),Object(c.createElement)("span",null,"Duration"),Object(c.createElement)("span",{id:"duration_time"},"00:00")),Object(c.createElement)("div",{id:"video_volume"},Object(c.createElement)("label",{id:"volume_bar",htmlFor:"volume"}),Object(c.createElement)("input",{type:"range",id:"volume",title:"volume",min:"0",max:"1",step:"0.1",value:"1"})),Object(c.createElement)("div",{id:"video_seek"},Object(c.createElement)("label",{htmlFor:"seek"}),Object(c.createElement)("input",{type:"range",id:"seek",title:"seek",min:"0",value:"0",max:"0"}))))}})}]);